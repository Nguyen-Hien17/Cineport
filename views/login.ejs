<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cineport</title>

    <link rel="stylesheet" href="css/login.css">
</head>

<body>
    <nav class="login-container">
        <span class="logo">
            <a href="#">
                <img src="image/cineport_logo.png" alt="">
            </a>
        </span>
        <span class="login-form">
            <form action="/login" method="POST" id="loginForm">
                <!-- <label for="email">Email</label> -->
                <li class="account-input">
                    <input type="email" placeholder="Enter your email" name="email">
                </li>
                <!-- <label for="password">Password</label>  -->
                <li class="account-input">
                    <input type="password" placeholder="Password" name="password">
                </li>
                <div class="login-button">
                    <button type="submit">Log In</button>
                </div>
                <input type="hidden" name="region" id="regionInput" value="US">
            </form>
        </span>
    </nav>

    <script>
        window.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const regionInput = document.getElementById('regionInput');

            let regionToSet = 'US'; // Default fallback

            // 1. If region is already in the URL, use that
            if (urlParams.has('region')) {
                regionToSet = urlParams.get('region');
            } else {
                // 2. Otherwise, detect from browser locale
                const locale = navigator.language; // e.g., "en-GB"
                regionToSet = locale.includes('-') ? locale.split('-')[1].toUpperCase() : 'US';
            }

            // 3. Set the hidden input value
            if (regionInput) {
                regionInput.value = regionToSet;
                console.log("Hidden input set to:", regionInput.value);
            }
        });
    </script>
</body>

</html>